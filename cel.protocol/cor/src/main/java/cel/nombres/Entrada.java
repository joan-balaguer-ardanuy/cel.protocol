package cel.nombres;

import cel.Nombre;
import cel.arca.Ramat;
import cel.arca.Serp;

/**
 * <tt>
 * <center>
 * <h3>Lot se salva i les ciutats de la plana són destruïdes</h3>
 * <big>19</big>
 * <sup>1</sup> Cap al tard, els dos àngels van arribar a Sodoma. Lot s'estava assegut a la porta de la ciutat. En veure'ls es va aixecar per anar-los a rebre i es prosternà fins a tocar terra amb el front.
 * <sup>2</sup> Després va dir:<br/>
 * --Si us plau, senyors meus, feu-me l'honor de venir a casa del vostre servent. Us rentareu els peus i podreu passar-hi la nit. Demà al matí continuareu el vostre camí.<br/>
 * Ells van respondre:<br/>
 * --No cal. Farem nit a la plaça.<br/>
 * <sup>3</sup> Però Lot va insistir tant que van anar a casa d'ell. Els va preparar sopar, va coure panets, i van menjar.<br/>
 * <sup>4</sup> Encara no se n'havien anat a dormir, que els homes de Sodoma van encerclar la casa: joves i vells, hi eren tots sense excepció.
 * <sup>5</sup> Cridaven Lot i li deien:<br/>
 * --On són els homes que han entrat a casa teva aquest vespre? Fes-los sortir. Volem abusar d'ells.<br/>
 * <sup>6</sup> Lot va sortir a l'entrada, tancà la porta darrere seu
 * <sup>7</sup> i els va dir:<br/>
 * --Germans, us ho demano, no feu aquesta maldat!
 * <sup>8</sup> Tinc dues filles encara verges; us les trauré perquè en feu el que vulgueu. Però no feu res a aquests homes: són hostes que s'han acollit sota el meu sostre.<br/>
 * <sup>9</sup> Ells van contestar:<br/>
 * --Fora d'aquí! Un home que ha vingut com a immigrant, ara vol fer de jutge? Et tractarem a tu pitjor que a ells!<br/>
 * Van empènyer Lot amb tota la força i s'acostaren a la porta per esbotzar-la.
 * <sup>10</sup> Però els dos homes van treure la mà, estiraren Lot cap a dintre la casa i van tancar la porta.
 * <sup>11</sup> I a tota aquella gent que eren davant l'entrada de la casa, tant als petits com als grans, els van deixar cecs; així no van ser capaços de trobar l'entrada.<br/>
 * <sup>12</sup> Llavors els hostes van dir a Lot:<br/>
 * --Qui et queda encara aquí? Gendres, fills i filles, tots els teus parents, treu-los d'aquesta ciutat.
 * <sup>13</sup> El clam que ha arribat davant el Senyor des d'aquest lloc és tan gran, que ell ens ha enviat a destruir-lo.<br/>
 * <sup>14</sup> Lot anà a avisar els seus futurs gendres, els qui s'havien de casar amb les seves filles, i els va dir:<br/>
 * --De seguida! Sortiu d'aquest lloc, perquè el Senyor vol devastar la ciutat!<br/>
 * Però els gendres es van pensar que Lot ho deia de per riure.<br/>
 * <sup>15</sup> A trenc d'alba, els dos àngels van donar pressa a Lot:<br/>
 * --Corre, emporta't de casa la teva dona i les teves dues filles que són aquí, si no voleu ser aniquilats amb la ciutat culpable.<br/>
 * <sup>16</sup> Veient que Lot s'entretenia massa, com que el Senyor se n'havia compadit, els àngels el van agafar per la mà juntament amb la seva dona i les seves dues filles i els van treure tots de la ciutat.<br/>
 * <sup>17</sup> Un cop fora, li van dir:<br/>
 * --Fuig, si vols salvar la vida. No miris enrere ni t'aturis enlloc de la plana, que series aniquilat: fuig a la muntanya.<br/>
 * <sup>18</sup> Lot els va dir:<br/>
 * --No, senyor meu!
 * <sup>19</sup> Tu has concedit el teu favor al teu servent i has estat amb mi tan bo que m'has salvat la vida. Pensa, doncs, que, abans no m'hauré refugiat a la muntanya, ja m'haurà atrapat el desastre i moriré.
 * <sup>20</sup> Mira, aquí hi ha aquesta petita ciutat, prou a la vora per a poder-m'hi refugiar. És molt petita. Deixa-m'hi refugiar per salvar la vida.<br/>
 * <sup>21</sup> Ell li va respondre:<br/>
 * --Fins en això et vull afavorir: no arrasaré la ciutat de què em parles.
 * <sup>22</sup> Corre, vés a refugiar-t'hi, que no puc fer res fins que no hi hagis entrat.<br/>
 * Per això la ciutat es diu Sóar.<br/>
 * <sup>23</sup> Quan el sol sortia, Lot va arribar a Sóar,
 * <sup>24</sup> i a l'instant el Senyor va fer ploure del cel sofre i foc sobre Sodoma i Gomorra.
 * <sup>25</sup> Va arrasar aquelles ciutats i tota la plana, amb els seus habitants i tota la vegetació.
 * <sup>26</sup> La dona de Lot va mirar enrere i es convertí en una estàtua de sal.<br/>
 * <sup>27</sup> Abraham va anar de bon matí a l'indret on s'havia aturat per parlar amb el Senyor.
 * <sup>28</sup> Va mirar, des d'allà dalt, cap a Sodoma i Gomorra i cap a tota la plana i va veure que de la terra pujava una fumarada com si hi hagués una fornal.<br/>
 * <sup>29</sup> Així Déu, quan va destruir les ciutats de la plana, es recordà d'Abraham i en va treure Lot, que hi habitava, perquè no es trobés enmig de la catàstrofe.<br/>
 * <h3>Lot i les seves filles</h3>
 * <sup>30</sup> Lot, que tenia por de quedar-se a Sóar, va pujar des d'aquesta ciutat per anar-se'n a viure a la regió muntanyosa amb les seves dues filles. Es van instal·lar en una cova.<br/>
 * <sup>31</sup> La filla gran va dir a la petita:<br/>
 * --El nostre pare és vell i en aquesta contrada no hi ha homes per a unir-se amb nosaltres tal com fan arreu.
 * <sup>32</sup> Vinga, fem beure vi al nostre pare i passarem la nit amb ell: així tindrem descendents seus.<br/>
 * <sup>33</sup> Aquella mateixa nit van emborratxar el seu pare, i la gran va jeure amb ell, sense que ell se n'adonés, ni de quan ella s'hi va ajeure ni de quan es va aixecar.<br/>
 * <sup>34</sup> L'endemà, la gran digué a la petita:<br/>
 * --Aquesta nit passada he dormit amb el pare; fem-li beure vi també aquesta nit i vés a dormir amb ell: així tindrem descendents seus.<br/>
 * <sup>35</sup> Aquella nit tornaren a emborratxar el seu pare, i la petita va jeure amb ell, sense que ell se n'adonés, ni de quan ella s'hi va ajeure ni de quan es va aixecar.<br/>
 * <sup>36</sup> Les dues filles de Lot van quedar embarassades del seu pare.
 * <sup>37</sup> La gran va tenir un fill i li va posar el nom de Moab. És l'avantpassat dels actuals moabites.
 * <sup>38</sup> També la petita va tenir un fill i li va posar el nom de Benammí. És l'avantpassat dels actuals ammonites.<br/> 
 * </center>
 * </tt>
 * 
 * @author joan
 *
 * @param <K> és la CLAU
 * @param <V> és el VALOR
 */
public class Entrada<K,V> extends Nombre<Serp<K,V>> implements Serp<K,V> {

	private static final long serialVersionUID = -3289806782501997828L;

	K clau;
	V valor;
	
	@Override
	public K obtenirClau() {
		return clau;
	}

	@Override
	public K establirClau(K clau) {
		K antiga = this.clau;
		this.clau = clau;
		return antiga;
	}

	@Override
	public V obtenirValor() {
		return valor;
	}

	@Override
	public V establirValor(V valor) {
		V antic = this.valor;
		this.valor = valor;
		return antic;
	}
	
	public Entrada() {
		super();
		establirEntrada(this);
	}

	public Entrada(Entrada<K,V> pare, K clau, V valor) {
		super(pare);
		establirEntrada(this);
		establirClau(clau);
		establirValor(valor);
	}

	@Override
	public V establir(K clau, V valor) {
		establirClau(clau);
		establirValor(valor);
		Ramat<Serp<K,V>> ramat = pastor();
		for(Serp<K,V> serp = ramat.següent(); ramat.téMés(); serp = ramat.següent()) {
			if(serp.obtenirClau() == clau) {
				return serp.establirValor(valor);
			}
		}
		crea(getClass(), this, clau, valor); 
		return null;
	}

	@Override
	public String obtenirNom() {
		return "Déu";
	}
}